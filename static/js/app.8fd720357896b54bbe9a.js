webpackJsonp([1],{"8qDu":function(t,e,i){t.exports=i.p+"static/img/avatar.24b7299.jpg"},A5Cx:function(t,e){},CEa2:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("j1ja");var n=i("/5sW"),s=i("Zrlr"),a=i.n(s),r=i("//Fk"),o=i.n(r);function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o.a(function(e,i){var n=t.url,s=void 0===n?"":n,a=t.param,r=void 0===a?"callback":a,o=t.query,u=void 0===o?{}:o,l=t.timeout,f=void 0===l?1e4:l,d=document.createElement("script"),h=u[r]="__jsonp__"+Date.now(),m=[];for(var p in u)m.push(p+"="+u[p]);s+=(-1===s.indexOf("?")?"?":"&")+m.join("&"),d.src=s,document.body.appendChild(d),window[h]=function(t){e(t),clearTimeout(c.timer),document.body.removeChild(d),delete window[h]},c.timer=setTimeout(function(){i(),document.body.removeChild(d),delete window[h]},f)})}var u=i("9qgI"),l=i.n(u),f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("div",{staticClass:"round1"}),this._v(" "),e("div",{staticClass:"round2"})])}]};var d=function t(e){var i=e.mid,n=e.name;a()(this,t),this.mid=i,this.name=n,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+i+".jpg?max_age=2592000"},h={name:"App",data:function(){return{singerList:[],currentIndex:-1,pageYOffset:-1,flag:!1,diff:-1}},computed:{shortcutList:function(){return this.singerList.map(function(t){return t.title.slice(0,1)})},fixTop:function(){return this.singerList[this.currentIndex]?this.singerList[this.currentIndex].title:""}},created:function(){var t=this;setTimeout(function(){t._getData()},800)},updated:function(){var t=this;this.offsetList=this.$refs["list-group"].map(function(t){return t.offsetTop}),window.onscroll=function(){t.flag||(t.pageYOffset=window.pageYOffset||document.documentElement.offsetTop)}},methods:{_getData:function(){var t=this;c({url:"https://c.y.qq.com/v8/fcg-bin/v8.fcg",param:"jsonpCallback",query:{g_tk:0,inCharset:"utf-8",outCharset:"utf-8",notice:0,format:"jsonp",channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,hostUin:0,needNewCode:0,platform:"yqq"}}).then(function(e){t.singerList=t._normalizeSinger(e.data.list)})},_normalizeSinger:function(t){var e={hot:{title:"热门",items:[]}};t.forEach(function(t,i){i<10&&e.hot.items.push(new d({mid:t.Fsinger_mid,name:t.Fsinger_name}));var n=t.Findex;e[n]||(e[n]={title:n,items:[]}),e[n].items.push(new d({mid:t.Fsinger_mid,name:t.Fsinger_name}))});var i=[],n=[];for(var s in e){var a=e[s];"hot"===s?i.push(a):s.match(/[a-zA-Z]/)&&n.push(a)}return n.sort(function(t,e){return t.title.charCodeAt(0)-e.title.charCodeAt(0)}),i.concat(n)},_scrollTo:function(){var t=this.$refs["list-group"][this.currentIndex],e=this;l()(t,"scroll",{begin:function(){e.flag=!0},complete:function(){e.flag=!1}})},onShortcutClick:function(t){if(t.target.classList.contains("item")){var e=parseInt(t.target.getAttribute("data-index"));this.currentIndex=e,this._scrollTo()}}},watch:{pageYOffset:function(t){t<this.offsetList[0]&&(this.currentIndex=-1,this.diff=-1);for(var e=0;e<this.offsetList.length-1;e++){var i=this.offsetList[e],n=this.offsetList[e+1];t>=i&&t<n&&(this.currentIndex=e,this.diff=n-t)}t>=this.offsetList[this.offsetList.length-1]&&(this.currentIndex=this.offsetList.length-1,this.diff=-1)},diff:function(t){this.$refs["fix-top"].style.top=t>0&&t<=30?t-30+"px":"0px"}},components:{loading:i("VU/8")({name:"loading"},f,!1,function(t){i("A5Cx")},"data-v-5c4e6654",null).exports}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("h1",[t._v("歌手列表")]),t._v(" "),i("ul",t._l(t.singerList,function(e){return i("li",{ref:"list-group",refInFor:!0,staticClass:"list-group"},[i("h2",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),i("ul",t._l(e.items,function(e){return i("li",{staticClass:"list-item"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"item.avatar"}],staticClass:"avatar",attrs:{alt:"",width:"50",height:"50"}}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.name))])])}))])})),t._v(" "),i("ul",{staticClass:"shortcut-list",on:{click:t.onShortcutClick}},t._l(t.shortcutList,function(e,n){return i("li",{staticClass:"item",class:{active:t.currentIndex===n},attrs:{"data-index":n}},[t._v(t._s(e)+"\n    ")])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.fixTop,expression:"fixTop"}],ref:"fix-top",staticClass:"fix-top"},[t._v(t._s(t.fixTop))]),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:!t.singerList.length,expression:"!singerList.length"}],staticClass:"loading"})],1)},staticRenderFns:[]};var p=i("VU/8")(h,m,!1,function(t){i("CEa2")},"data-v-33eb4ba0",null).exports,v=(i("zO3H"),i("v5o6")),g=i.n(v),_=i("cTzj"),x=i.n(_);n.a.config.productionTip=!1,g.a.attach(document.body),n.a.use(x.a,{loading:i("8qDu")}),new n.a({el:"#app",render:function(t){return t(p)}})},zO3H:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8fd720357896b54bbe9a.js.map